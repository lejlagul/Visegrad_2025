<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Cubic cell – 3‑D only</title>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body{margin:0;overflow:hidden;font-family:monospace;background:#000}
  #status{position:fixed;top:10px;left:10px;font-size:24px;color:#fff;z-index:1000}
  .btn{position:fixed;padding:6px 12px;font:16px monospace;
      background:#222;color:#fff;border:1px solid #888;border-radius:4px;
      opacity:0.85;z-index:1000;cursor:pointer}
  .btn:disabled{background:#555;color:#999;cursor:not-allowed}
  #resetBtn          {bottom:12px;left:12px}
  #secretePathBtn    {bottom:12px;right:12px}
  #secreteDiffuseBtn {bottom:56px;right:12px}
  #zoomInBtn         {bottom:12px;left:calc(50% - 34px)}
  #zoomOutBtn        {bottom:12px;left:calc(50% + 2px)}
</style>
</head>

<body>
  <div id="status">Ready</div>
  <button id="resetBtn"          class="btn">Reset</button>
  <button id="secretePathBtn"    class="btn">Secrete &amp; Path</button>
  <button id="secreteDiffuseBtn" class="btn">Secrete &amp; Diffuse</button>
  <button id="zoomInBtn"         class="btn">＋</button>
  <button id="zoomOutBtn"        class="btn">－</button>

  <a-scene embedded>
    <!-- lights -->
    <a-entity light="type:ambient;intensity:1"></a-entity>
    <a-entity light="type:directional;intensity:0.8" position="2 4 2"></a-entity>

    <!-- the cell model, now visible from the start -->
    <a-entity id="cell" drag-rotate scale="2 2 2"></a-entity>

    <!-- simple static camera aimed straight at the origin -->
    <a-entity camera position="0 0 5"></a-entity>
  </a-scene>

  <!-- drag‑rotate component (unchanged) -->
  <script>
  AFRAME.registerComponent('drag-rotate',{schema:{speed:{default:1}},init(){
      const cvs=this.el.sceneEl.canvas;
      let dragging=false,px=0,py=0;
      const start=e=>{dragging=true;px=e.clientX;py=e.clientY};
      const move=(x,y,f=1)=>{if(!dragging)return;
        const r=this.el.getAttribute('rotation');
        this.el.setAttribute('rotation',{x:r.x+(y-py)*f*this.data.speed,
                                         y:r.y+(x-px)*f*this.data.speed,
                                         z:r.z});
        px=x;py=y};
      cvs.addEventListener('mousedown',e=>start(e));
      window.addEventListener('mousemove',e=>move(e.clientX,e.clientY));
      window.addEventListener('mouseup',()=>dragging=false);
      cvs.addEventListener('touchstart',e=>start(e.touches[0]),{passive:false});
      window.addEventListener('touchmove',e=>{
        if(dragging){e.preventDefault();move(e.touches[0].clientX,e.touches[0].clientY,0.5)}},{passive:false});
      window.addEventListener('touchend',()=>dragging=false);
  }});
  </script>

  <!-- the rest of your original network‑building, diffusion / path‑propagation,
       zoom, secretion, and reset code goes here *unchanged* -->
  <script src="cell‑logic.js"></script>
</body>
</html>
